<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tRPC-Cpp: trpc::rpcz Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tRPC-Cpp<span id="projectnumber">&#160;1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetrpc.html">trpc</a></li><li class="navelem"><a class="el" href="namespacetrpc_1_1rpcz.html">rpcz</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">trpc::rpcz Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Namespace to wrap rpcz interfaces.  
<a href="namespacetrpc_1_1rpcz.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One request per span.  <a href="classtrpc_1_1rpcz_1_1_span.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a12d2c47afdf8cd7e53eecda4f2e3945b" id="r_a12d2c47afdf8cd7e53eecda4f2e3945b"><td class="memItemLeft" align="right" valign="top"><a id="a12d2c47afdf8cd7e53eecda4f2e3945b" name="a12d2c47afdf8cd7e53eecda4f2e3945b"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>CustomerClientRpczSampleFunction</b> = std::function&lt; bool(const <a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ClientContextPtr</a> &amp;context)&gt;</td></tr>
<tr class="memdesc:a12d2c47afdf8cd7e53eecda4f2e3945b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample function type of client rpcz filter. <br /></td></tr>
<tr class="separator:a12d2c47afdf8cd7e53eecda4f2e3945b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf594ffafd3e1e3e15a57d367df63e0" id="r_abdf594ffafd3e1e3e15a57d367df63e0"><td class="memItemLeft" align="right" valign="top"><a id="abdf594ffafd3e1e3e15a57d367df63e0" name="abdf594ffafd3e1e3e15a57d367df63e0"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>CustomerServerRpczSampleFunction</b> = std::function&lt; bool(const <a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ServerContextPtr</a> &amp;context)&gt;</td></tr>
<tr class="memdesc:abdf594ffafd3e1e3e15a57d367df63e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample function type of server rpcz filter. <br /></td></tr>
<tr class="separator:abdf594ffafd3e1e3e15a57d367df63e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6feb866a794bcf0724970d4386c488f0" id="r_a6feb866a794bcf0724970d4386c488f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a6feb866a794bcf0724970d4386c488f0">CreateUserRpczSpan</a> (const std::string &amp;viewer_name)</td></tr>
<tr class="memdesc:a6feb866a794bcf0724970d4386c488f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the kSpanTypeUser type of span object, users are provided with the ability to create a root span object without context.  <br /></td></tr>
<tr class="separator:a6feb866a794bcf0724970d4386c488f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84f5aa9327bdf9bd43e96897315fcb3d" id="r_a84f5aa9327bdf9bd43e96897315fcb3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a84f5aa9327bdf9bd43e96897315fcb3d">CreateUserRpczSpan</a> (const std::string &amp;viewer_name, <a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ServerContextPtr</a> &amp;context)</td></tr>
<tr class="memdesc:a84f5aa9327bdf9bd43e96897315fcb3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the kSpanTypeUser type of span object, users are provided with the ability to create a root span object with context.  <br /></td></tr>
<tr class="separator:a84f5aa9327bdf9bd43e96897315fcb3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcee9320e77ed5ca62eff9ce3b0da2a9" id="r_afcee9320e77ed5ca62eff9ce3b0da2a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#afcee9320e77ed5ca62eff9ce3b0da2a9">GetUserRpczSpan</a> (const <a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ServerContextPtr</a> &amp;context)</td></tr>
<tr class="memdesc:afcee9320e77ed5ca62eff9ce3b0da2a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">For span objects of type kSpanTypeUser, extract the root span object from the context.  <br /></td></tr>
<tr class="separator:afcee9320e77ed5ca62eff9ce3b0da2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18413af145e552311003b2b0ea46d307" id="r_a18413af145e552311003b2b0ea46d307"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a18413af145e552311003b2b0ea46d307">SubmitUserRpczSpan</a> (<a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> *root_span_ptr)</td></tr>
<tr class="memdesc:a18413af145e552311003b2b0ea46d307"><td class="mdescLeft">&#160;</td><td class="mdescRight">For span objects of type kSpanTypeUser, submit the root span object to the framework.  <br /></td></tr>
<tr class="separator:a18413af145e552311003b2b0ea46d307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28de09aef57c50c787b447a31853e442" id="r_a28de09aef57c50c787b447a31853e442"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a28de09aef57c50c787b447a31853e442">SetServerSampleFunction</a> (const <a class="el" href="namespacetrpc_1_1rpcz.html#abdf594ffafd3e1e3e15a57d367df63e0">CustomerServerRpczSampleFunction</a> &amp;sample_function)</td></tr>
<tr class="memdesc:a28de09aef57c50c787b447a31853e442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Let user set their own server sample function.  <br /></td></tr>
<tr class="separator:a28de09aef57c50c787b447a31853e442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18fd60153a3475021f32bc55af5e3705" id="r_a18fd60153a3475021f32bc55af5e3705"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a18fd60153a3475021f32bc55af5e3705">DelServerSampleFunction</a> ()</td></tr>
<tr class="memdesc:a18fd60153a3475021f32bc55af5e3705"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete user set server sample funtion, fallback to framework sample function.  <br /></td></tr>
<tr class="separator:a18fd60153a3475021f32bc55af5e3705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6cade812122295d1b754575f50be67" id="r_a0e6cade812122295d1b754575f50be67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#a0e6cade812122295d1b754575f50be67">SetClientSampleFunction</a> (const <a class="el" href="namespacetrpc_1_1rpcz.html#a12d2c47afdf8cd7e53eecda4f2e3945b">CustomerClientRpczSampleFunction</a> &amp;sample_function)</td></tr>
<tr class="memdesc:a0e6cade812122295d1b754575f50be67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Let user set their own client sample function.  <br /></td></tr>
<tr class="separator:a0e6cade812122295d1b754575f50be67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa31f7257c405d327a602ad2eac15a016" id="r_aa31f7257c405d327a602ad2eac15a016"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetrpc_1_1rpcz.html#aa31f7257c405d327a602ad2eac15a016">DelClientSampleFunction</a> ()</td></tr>
<tr class="memdesc:aa31f7257c405d327a602ad2eac15a016"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete user set client sample funtion, fallback to framework sample function.  <br /></td></tr>
<tr class="separator:aa31f7257c405d327a602ad2eac15a016"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Namespace to wrap rpcz interfaces. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6feb866a794bcf0724970d4386c488f0" name="a6feb866a794bcf0724970d4386c488f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6feb866a794bcf0724970d4386c488f0">&#9670;&#160;</a></span>CreateUserRpczSpan() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> * trpc::rpcz::CreateUserRpczSpan </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>viewer_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For the kSpanTypeUser type of span object, users are provided with the ability to create a root span object without context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">viewer_name</td><td>The name of the root span object, used for external display. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the creation fails, nullptr is returned. If successful, a pointer to the root span object is returned. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Since there is no place to store the root span object, users need to pass the root span object themselves during usage. Users can manipulate the root span object but should not actively release it. The framework is responsible for releasing the root span object uniformly. </dd></dl>

</div>
</div>
<a id="a84f5aa9327bdf9bd43e96897315fcb3d" name="a84f5aa9327bdf9bd43e96897315fcb3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84f5aa9327bdf9bd43e96897315fcb3d">&#9670;&#160;</a></span>CreateUserRpczSpan() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> * trpc::rpcz::CreateUserRpczSpan </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>viewer_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ServerContextPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For the kSpanTypeUser type of span object, users are provided with the ability to create a root span object with context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">viewer_name</td><td>The name of the root span object, used for external display. </td></tr>
    <tr><td class="paramname">context</td><td>Context used to store the pointer of the root span object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the creation fails, nullptr is returned. If successful, a pointer to the root span object is returned. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Users can obtain the root span object through the GetUserRpczSpan interface. Users can manipulate the root span object but should not actively release it. The framework is responsible for releasing the root span object uniformly. </dd></dl>

</div>
</div>
<a id="aa31f7257c405d327a602ad2eac15a016" name="aa31f7257c405d327a602ad2eac15a016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31f7257c405d327a602ad2eac15a016">&#9670;&#160;</a></span>DelClientSampleFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trpc::rpcz::DelClientSampleFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete user set client sample funtion, fallback to framework sample function. </p>
<dl class="section note"><dt>Note</dt><dd>Not thread-safe. </dd></dl>

</div>
</div>
<a id="a18fd60153a3475021f32bc55af5e3705" name="a18fd60153a3475021f32bc55af5e3705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18fd60153a3475021f32bc55af5e3705">&#9670;&#160;</a></span>DelServerSampleFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trpc::rpcz::DelServerSampleFunction </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete user set server sample funtion, fallback to framework sample function. </p>
<dl class="section note"><dt>Note</dt><dd>Not thread-safe. </dd></dl>

</div>
</div>
<a id="afcee9320e77ed5ca62eff9ce3b0da2a9" name="afcee9320e77ed5ca62eff9ce3b0da2a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcee9320e77ed5ca62eff9ce3b0da2a9">&#9670;&#160;</a></span>GetUserRpczSpan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> * trpc::rpcz::GetUserRpczSpan </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtrpc_1_1_ref_ptr.html">trpc::ServerContextPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For span objects of type kSpanTypeUser, extract the root span object from the context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>Context used to store the pointer of the root span object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If not exist, nullptr is returned; otherwise, a pointer to the root span object is returned. </dd></dl>

</div>
</div>
<a id="a0e6cade812122295d1b754575f50be67" name="a0e6cade812122295d1b754575f50be67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6cade812122295d1b754575f50be67">&#9670;&#160;</a></span>SetClientSampleFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trpc::rpcz::SetClientSampleFunction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacetrpc_1_1rpcz.html#a12d2c47afdf8cd7e53eecda4f2e3945b">CustomerClientRpczSampleFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>sample_function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Let user set their own client sample function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample_function</td><td>Sample function to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Used in client processing scenario. </dd></dl>

</div>
</div>
<a id="a28de09aef57c50c787b447a31853e442" name="a28de09aef57c50c787b447a31853e442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28de09aef57c50c787b447a31853e442">&#9670;&#160;</a></span>SetServerSampleFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trpc::rpcz::SetServerSampleFunction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacetrpc_1_1rpcz.html#abdf594ffafd3e1e3e15a57d367df63e0">CustomerServerRpczSampleFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>sample_function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Let user set their own server sample function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample_function</td><td>Sample function to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Used in server processing scenario. </dd></dl>

</div>
</div>
<a id="a18413af145e552311003b2b0ea46d307" name="a18413af145e552311003b2b0ea46d307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18413af145e552311003b2b0ea46d307">&#9670;&#160;</a></span>SubmitUserRpczSpan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trpc::rpcz::SubmitUserRpczSpan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtrpc_1_1rpcz_1_1_span.html">Span</a> *&#160;</td>
          <td class="paramname"><em>root_span_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For span objects of type kSpanTypeUser, submit the root span object to the framework. </p>
<dl class="section note"><dt>Note</dt><dd>The interface provided to users can only be called on the root span object. After calling this interface, users cannot manipulate the root span object anymore. Ideally, this interface should be designed as a member function of the <a class="el" href="classtrpc_1_1rpcz_1_1_span.html" title="One request per span.">Span</a> class. However, to avoid a circular dependency between <a class="el" href="classtrpc_1_1rpcz_1_1_span.html" title="One request per span.">Span</a> and RpczCollector in Bazel, it is implemented differently. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 28 2023 11:25:48 for tRPC-Cpp by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>

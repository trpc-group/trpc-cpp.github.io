<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tRPC-Cpp: trpc::stream::StreamWriter&lt; W &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tRPC-Cpp<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetrpc.html">trpc</a></li><li class="navelem"><a class="el" href="namespacetrpc_1_1stream.html">stream</a></li><li class="navelem"><a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html">StreamWriter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">trpc::stream::StreamWriter&lt; W &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The synchronous stream writer.  
 <a href="classtrpc_1_1stream_1_1_stream_writer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="stream_8h_source.html">stream.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac9f848d90547a35f83faa1e22ce4f254" id="r_ac9f848d90547a35f83faa1e22ce4f254"><td class="memItemLeft" align="right" valign="top"><a id="ac9f848d90547a35f83faa1e22ce4f254" name="ac9f848d90547a35f83faa1e22ce4f254"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>StreamWriter</b> (const StreamWriterImplPtr&lt; W &gt; &amp;writer)</td></tr>
<tr class="separator:ac9f848d90547a35f83faa1e22ce4f254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad354efc71bf6ea0d03388619a35d3edf" id="r_ad354efc71bf6ea0d03388619a35d3edf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html#ad354efc71bf6ea0d03388619a35d3edf">Write</a> (const W &amp;msg) const</td></tr>
<tr class="memdesc:ad354efc71bf6ea0d03388619a35d3edf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a message to the stream.  <br /></td></tr>
<tr class="separator:ad354efc71bf6ea0d03388619a35d3edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec31b2d6d4c5afe679e3be1f1187fb0e" id="r_aec31b2d6d4c5afe679e3be1f1187fb0e"><td class="memItemLeft" align="right" valign="top"><a id="aec31b2d6d4c5afe679e3be1f1187fb0e" name="aec31b2d6d4c5afe679e3be1f1187fb0e"></a>
<a class="el" href="classtrpc_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><b>WriteDone</b> () const</td></tr>
<tr class="memdesc:aec31b2d6d4c5afe679e3be1f1187fb0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">It indicates all messages were written. It will send EOF message to the remote peer. <br /></td></tr>
<tr class="separator:aec31b2d6d4c5afe679e3be1f1187fb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02f93a6a15317f7c232679568cb4f03" id="r_ac02f93a6a15317f7c232679568cb4f03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html#ac02f93a6a15317f7c232679568cb4f03">Finish</a> () const</td></tr>
<tr class="memdesc:ac02f93a6a15317f7c232679568cb4f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finishes the stream.  <br /></td></tr>
<tr class="separator:ac02f93a6a15317f7c232679568cb4f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f95a23ab2fcec22301b11dfa3c42a63" id="r_a5f95a23ab2fcec22301b11dfa3c42a63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtrpc_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html#a5f95a23ab2fcec22301b11dfa3c42a63">GetStatus</a> () const</td></tr>
<tr class="memdesc:a5f95a23ab2fcec22301b11dfa3c42a63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the inner status of stream.  <br /></td></tr>
<tr class="separator:a5f95a23ab2fcec22301b11dfa3c42a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename W&gt;<br />
class trpc::stream::StreamWriter&lt; W &gt;</div><p>The synchronous stream writer. </p>
<p>It provides users with streaming programing. We can write messages to the stream.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">W</td><td>is the type of message to be written. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac02f93a6a15317f7c232679568cb4f03" name="ac02f93a6a15317f7c232679568cb4f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02f93a6a15317f7c232679568cb4f03">&#9670;&#160;</a></span>Finish()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename W &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1_status.html">Status</a> <a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html">trpc::stream::StreamWriter</a>&lt; W &gt;::Finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finishes the stream. </p>
<p>For the client, an EOF will be sent to the server automatically, and the final RPC execution result will be waited. For the server, nothing happens. It's recommended to call this method on the client side, but it is optional for the server side, because the stream will be closed automatically when user's function of service returned. It makes no difference in the final result whether it's called from the "StreamReader", "StreamWriter" or "StreamReaderWriter" specified stream. For one stream, it should be called at most once at each side, it is also regarded as a writing operation, hence, it should be called after the previous write or read operation (if any) to complete, otherwise it's undefined behavior.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns the final RPC execution result. </dd></dl>

</div>
</div>
<a id="a5f95a23ab2fcec22301b11dfa3c42a63" name="a5f95a23ab2fcec22301b11dfa3c42a63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f95a23ab2fcec22301b11dfa3c42a63">&#9670;&#160;</a></span>GetStatus()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename W &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1_status.html">Status</a> <a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html">trpc::stream::StreamWriter</a>&lt; W &gt;::GetStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the inner status of stream. </p>
<p>If you want to known the details of error occurred in the stream, it will help. </p>

</div>
</div>
<a id="ad354efc71bf6ea0d03388619a35d3edf" name="ad354efc71bf6ea0d03388619a35d3edf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad354efc71bf6ea0d03388619a35d3edf">&#9670;&#160;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename W &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtrpc_1_1_status.html">Status</a> <a class="el" href="classtrpc_1_1stream_1_1_stream_writer.html">trpc::stream::StreamWriter</a>&lt; W &gt;::Write </td>
          <td>(</td>
          <td class="paramtype">const W &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes a message to the stream. </p>
<p>A writing operation should start before the previous writing (if any) to complete, i.e. at most one reading operation can be performed at the same time, otherwise it's undefined behavior. A stream is a full-duplex communication channel, hence reading and writing can be performed concurrently.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>is a message to be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return a status of writing operation. An ok status will be returned if no error occurred, but it does NOT mean the message has already bee sent on the wire. Error status Otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>trpc/stream/<a class="el" href="stream_8h_source.html">stream.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 10 2023 16:03:03 for tRPC-Cpp by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
